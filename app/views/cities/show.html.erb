<div class="city-show">
  <%# Banner section %>
  <div class="city-banner" style="background-image: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.4)),
        url('<%= cl_image_path(@city.photo.key) %>');">
    <div class="container">
      <h1 class="city-name"><%= @city.name%></h1>
      <p class="city-name"><%= @city.description%></p>
    </div>
  </div>

  <div class="city-attraction mt-4 mb-3">
    <h1><%= @city.name%> Communities</h1>
    <div class="container border-bottom">
      <div class="d-grid gap-2 col-6 justify-content-center text-center mx-auto mt-3">
        <% @communities.each do |community| %>
          <%= link_to community.name ,city_community_path(community), class: "btn-all-events" %>
        <% end %>
      </div>
    </div>
  </div>

  <%# Attractions section %>
  <div class="city-attraction mt-2 mb-3">
    <div class="pt-5 pb-5">
     <h1><%= @city.name%> Attractions</h1>
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
                <% @attractions.each_slice(3).with_index do |attractions_slice, index| %>
                  <div class="carousel-item <%= 'active' if index == 0 %>">
                    <div class="row">
                      <% attractions_slice.each do |attraction| %>
                        <div class="col-md-4 mb-3">
                          <div class="card" id="city-attraction-card">
                            <%= link_to attraction_path(attraction) do %>
                              <%= cl_image_tag attraction.photo.key, class: "img-fluid", alt: attraction.name %>
                            <% end %>

                            <div class="card-body">
                              <h3 class="card-title"><a href="<%= attraction.website_url %>"><%= attraction.name %></a></h3>
                              <p class="card-text"><i class="fa-solid fa-location-dot"></i> <%= attraction.address %></p>
                            </div>
                          </div>
                        </div>
                      <% end %>
                    </div>
                  </div>
                <% end %>
              </div>

              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                <span class="carousel-control-prev-icon carousel-dark" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="d-grid gap-2 col-6 justify-content-center text-center mx-auto mt-3">
        <%= link_to "All Attractions", city_attractions_path(@city), class: "btn-all-events" %>
      </div>
    </div>
  </div>


  <div class="city-event">
    <div class="container">
      <h1>Events in <%= @city.name%></h1>
      <div class="card-group">
        <% @events.each do |event| %>
          <div class="card">
            <% if event.photos.any? %>
              <%= link_to city_event_path(@city) do %>
                <%= cl_image_tag event.photos.first.key, class: "card-img-top event-card-img", alt: event.name %>
              <% end %>
            <% else %>
              <!-- Display a placeholder image or default image if no photos are available -->
              <%= image_tag "placeholder.jpg", class: "card-img-top", alt: "Placeholder Image" %>
            <% end %>
            <div class="card-body">
              <h4 class="card-title"><%= event.name %></h4>
              <p class="card-text"><i class="fa-solid fa-location-dot"></i> <%= event.address %></p>
            </div>
          </div>
        <% end %>
      </div>
      <div class="d-grid gap-2 col-6 justify-content-center text-center mx-auto mt-3">
        <%= link_to "All Events", city_events_path(@city), class: "btn-all-events" %>
      </div>
    </div>

  </div>

  <%# Posts section %>
  <div class="city-post">
    <div class="container city-posts">
      <h1 class="mb-5">Posts from <%= @city.name%></h1>
      <% @posts.each do |post| %>
        <div class="card mb-3 m-auto" id="post-card">
          <div class="row no-gutters">
            <div class="col-md-4">
              <%= link_to post_path(post) do %>
                <%= cl_image_tag post.photo.key, class: "img-fluid", id: "post-image" %>
              <% end %>
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h4 class="card-title"><%= post.title %></h4>
                <p class="card-text">
                  <%= post.content %>
                </p>
              </div>
            </div>
          </div>
        </div>
      <% end %>
      <div class="d-grid gap-2 col-6 justify-content-center text-center mx-auto mt-3">
        <%= link_to "All Posts", city_posts_path(@city), class: "btn-all-events" %>
      </div>
    </div>

  </div>

</div>
